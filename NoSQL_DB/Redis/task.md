# Введение в MongoDB

### Задание 1

**Цель практической работы:**

Научиться выполнять простые запросы в Redis.

Что нужно сделать:

Напишите последовательность команд для Redis:

    Создайте ключ index со значением “index precalculated content”.
    Проверьте, есть ли ключ index в БД.
    Узнайте, сколько ещё времени будет существовать ключ index.
    Отмените запланированное удаление ключа index.

### Задание 2

**Цель практической работы:**

Научиться работать со структурами данных в Redis.

Что нужно сделать:

Напишите последовательность команд для Redis:

    Создайте в Redis структуру данных с ключом ratings для хранения следующих значений рейтингов технологий: mysql — 10, postgresql — 20, mongodb — 30, redis — 40.
    По этому же ключу увеличьте значение рейтинга mysql на 15.
    Удалите из структуры элемент с максимальным значением.
    Выведите место в рейтинге для mysql

### Задание 3

**Цель практической работы:**

Научиться работать с механизмом Pub/Sub в Redis.

Что нужно сделать:

Напишите две команды для СУБД Redis:

    Подпишитесь на все события, опубликованные на каналах, начинающихся с events.
    Опубликуйте сообщение на канале events101 с текстом “Hello there”.

### Задание 4

**Цель практической работы:**

Научиться работать с хранимыми функциями в Redis.

Что нужно сделать:

    Сохраните в Redis функцию, которая принимает ключ и значение и сохраняет под указанным ключом квадратный корень от значения.


## Выполнение задания

### Решение задания 1

    SET index "index precalculated content"
    EXISTS index
    TTL index
    PERSIST index

![](./images/1.png)

### Решение задания 2

    ZADD ratings 10 mysql 20 postgresql 30 mongodb 40 redis
    ZINCRBY ratings 15 "mysql"
    ZPOPMAX ratings
    ZRANK ratings mysql

![](./images/2.png)

### Решение задания 3

    PSUBSCRIBE events*
    PUBLISH events101 "Hello there"

![](./images/3.png)

### Решение задания 4

    SCRIPT LOAD "return redis.call('SET', KEYS[1], math.sqrt(tonumber(ARGV[1])))"

    EVALSHA 1386dd91a880fefac223a0997226e2d9ee583713 1 newkey 25

    get newkey


![](./images/41.png)

![](./images/42.png)
